<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Automated Frontend Testing</title>

    <meta name="description" content="Automated Frontend Testing &mdash; slides describing how to perform functional testing with CasperJS, WebDriver, and BrowserStack.">
    <meta name="author" content="Chris Ruppel">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/print.css" type="text/css" media="print">

    <link rel="stylesheet" href="lib/github.css">
    <link rel="stylesheet" href="lib/prism.css">
  </head>

  <body>

    <div class="reveal">

      <!-- Used to fade in a background when a specific slide state is reached -->
      <div class="state-background"></div>

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section data-state="bluesy">
          <br><br>
          <h1 style="font-size: 3.2em; ">Automated Frontend Testing</h1><br>
          <p class="fragment insert-container">Or: How to Automate the Process of <span class="insert fragment">detecting when you</span> Break Things</p>
          <script>
            // Delicously hacky. Look away.
            if( navigator.userAgent.match( /(iPhone|iPad|iPod|Android)/i ) ) document.write( '<p style="color: rgba(0,0,0,0.3); text-shadow: none;">('+'Tap to navigate'+')</p>' );
          </script>
        </section>

        <section>
          <h2>Chris Ruppel</h2>
          <section>
            <br><br>
            <p>frontend dev @ <a href="http://fourkitchens.com">Four Kitchens</a></p>
            <p><a href="http://twitter.com/rupl">twitter.com/rupl</a></p>
            <p><a href="https://github.com/rupl">github.com/rupl</a></p>
          </section>
          <section>
            <a href="http://fourkitchens.com"><img src="img/4k-logo-square-500px.png" alt="Four Kitchens" style="border: 0; box-shadow: none; "></a><br>
            <!-- <small><a href="http://fourkitchens.com/careers">(we're hiring!)</a></small> -->
          </section>
          <!-- <section>
            <br><br>
            <p style="font-size: 1.25em;">I contribute and present about open source:</p><br>
            <ul class="fragment">
              <li><a href="http://rupl.github.io/unfold/">Unfolding the Box Model</a>
              <li><a href="https://www.drupal.org/project/modernizr">Modernizr Drupal module</a>
              <li><a href="https://www.drupal.org/project/fastclick">FastClick Drupal module</a>
              <li><a href="http://fourword.fourkitchens.com/blog/series/webperf-wednesday">Webperf Wednesday series</a>
            </ul>
          </section> -->
        </section>

        <section>
          <h2>Why do I need functional testing on the frontend?</h2>
          <section>
            <br>
            <p>Subtle frontend errors:</p>
            <br>
            <ul>
              <li class="fragment">Minor CSS changes that throw things off</li>
              <li class="fragment">Changes to JS files that break things</li>
              <li class="fragment">Aggregates changing when not necessary</li>
              <li class="fragment">Performance regressions<br><br></li>
            </ul>
          </section>
        </section>

        <section>
          <section data-state="blackout">
            <br>
            <h1>CasperJS</h1>
          </section>
          <section>
            <p>Casper allows for scripted actions to be tested. It uses PhantomJS under the hood.</p>
            <br>
            <ul>
              <li class="fragment">It runs fast!</li>
              <li class="fragment">Run the same test with multiple screen sizes.</li>
              <li class="fragment">Test complex features or components.</li>
              <li class="fragment">Automate complex user actions.</li>
              <li class="fragment">Test content creation, transactions, other features.</li>
              <li class="fragment">Keep an eye on problematic pages.</li>
              <li class="fragment">If you can write jQuery, you can write CasperJS</li>
              <li class="fragment">Easy to run against local and remote environments</li>
              <li class="fragment"><a href="https://drupalize.me/blog/201410/using-remote-debugger-casperjs-and-phantomjs">Can be debugged remotely</a> (really helpful!!)</li>
            </ul>
          </section>
          <section>
            <h2>Cons</h2>
            <br>
            <ul>
              <li class="fragment">It uses old WebKit. <span class="fragment">(534.34)</span></li>
              <li class="fragment"><em>Very old WebKit</em> <span class="fragment">(Safari 5 / Chrome 13)</span></li>
              <li class="fragment">CasperJS will be using Phantom 1.9.x<br> for the foreseeable future.</li>
              <li class="fragment">OS/Browser coverage is limited to one combo</li>
            </ul>
          </section>
          <section>
            <h2>Test frontend components</h2>
            <br>
            <pre><code class="language-bash"># test the canonical picturefill demo
$ casperjs test picturefill.js</code></pre>
            <br>
            <p class="fragment"><a href="http://fourword.fourkitchens.com/article/using-casperjs-test-picturefill">Read the blog post</a> or <a href="https://www.youtube.com/watch?v=3qNdxjfgbAg">watch a screencast</a><br> describing this test in detail.</p>
          </section>
          <section>
            <h2>Simulate user actions</h2>
            <br>
            <pre><code class="language-bash"># test simple user actions like clicking,
# keyboard navigation, filling forms
$ casperjs test user-actions.js</code></pre>
            <br>
            <p class="fragment"><a href="http://fourword.fourkitchens.com/article/simulate-user-actions-casperjs">Read the blog post</a> describing this test in detail.</p>
          </section>
          <section>
            <h2>Test author<br> workflow in Drupal</h2>
            <br>
            <pre><code class="language-bash"># test a Drupal demo site, log in, add content
$ casperjs test drupal.js</code></pre>
            <br>
            <p class="fragment"><a href="http://fourword.fourkitchens.com/article/testing-drupal-casperjs">Read the blog post</a> or <a href="http://www.youtube.com/watch?v=qhA6O1u97PE#t=1283">watch a video</a>.</p>
          </section>
          <section>
            <br>
            <h2>More examples</h2>
            <br>
            <p>Keep checking our blog post series on the Four Kitchens blog to <a href="http://fourword.fourkitchens.com/article/series/casperjs">learn more about CasperJS</a>.</p>
          </section>
        </section>

        <section>
          <section data-state="blackout">
            <br>
            <h1>Visual Regression testing</h1>
          </section>
          <section>
            <br>
            <p>CSS regressions? say it ain't so!</p>
            <br>
            <p class="fragment">Having no scope at all, CSS is<br> the easiest thing to nudge out of place.</p>
            <br>
            <p class="fragment">It's also easier to prevent than you think.</p>
          </section>
          <section>
            <h2>Wraith</h2>
            <p class="fragment">Wraith is the easiest way to take screenshots of two environments, producing a visual diff.</p>
            <p class="fragment">It can catch tiny errors that the human eye might miss.</p>
            <img class="fragment" src="img/wraith-example.png">
          </section>
          <section>
            <h3>Basic usage of Wraith</h3>
            <br>
            <pre><code class="language-bash"># examples/wraith
$ gem install wraith

# run the capture process
$ wraith capture demo

# view results in the browser
$ open shots/gallery.html</code></pre>
          </section>
          <section>
            <h3>Multiple tests</h3>
            <br>
            <p>Wraith handles one comparison per config file.</p>
            <br>
            <p class="fragment">However, it has support for multiple configs, so several config files in one repo allows for multiple comparisons.</p>
            <br>
            <p class="fragment"><a href="https://github.com/BBC-News/wraith#wraith">Read more on GitHub</a></p>
          </section>
          <section>
            <h2>WebDriverCSS <span class="fragment">+ BrowserStack</span></h2>
            <br>
            <p class="fragment">WebDriverIO is a node.js extension<br> for Selenium WebDriver.</p>
            <br>
            <p class="fragment">All the power of Casper, but on<br><a href="https://www.browserstack.com/list-of-browsers-and-platforms?product=automate">700+ device/OS/browser combos!</a></p>
          </section>
          <section>
            <pre><code class="language-bash"># examples/webdrivercss
$ npm install

# run the test
$ node webdrivercss.browserstack.js</code></pre>
          </section>
        </section>

        <section data-state="blackout">
          <section>
            <br><h1>Automating Tasks with CI</h1>
          </section>
          <section>
            <h2>The Basics</h2>
            <br>
            <p class="fragment">Everything outlined in this section<br> requires two key ingredients:</p>
            <br>
            <ul class="fragment">
              <li>Continuous integration (CI)</li>
              <li><a href="http://git-scm.com/book/ch7-3.html">Git hooks</a></li>
            </ul>
            <br><br>
            <p class="fragment">Four Kitchens uses <a href="http://jenkins-ci.org/">Jenkins</a> and <a href="https://help.github.com/articles/post-receive-hooks">GitHub WebHooks</a><br> in our workflow, and you can use whatever you wish.</p>
          </section>
        </section>

        <section>
          <section>
            <h2>Trigger Jenkins builds<br> by pushing to GitHub</h2>
            <br>
            <p class="fragment">An oldie but goodie: <a href="http://fourword.fourkitchens.com/article/trigger-jenkins-builds-pushing-github">check out our how-to from 2011</a></p>
            <br>
            <ol class="fragment">
              <li>You push to GitHub master branch (or merge PR)</li>
              <li>GitHub pings your CI server using post-receive hook</li>
              <li><em>"Yo Jenkins, the repository was updated!"</em></li>
              <li>CI server pulls the new code to your staging area</li>
            </ol>
            <br>
            <br>
            <p class="fragment">Although fairly simple in application, the post illustrates the basic concepts underlying all tasks involving Jenkins.</p>
          </section>
          <section>
            <h2>Use git hooks to test before pushing code</h2>
            <br>
            <p class="fragment">Git can be configured to automatically run<br> tasks before or after many of its operations.</p>
            <br>
            <p class="fragment">pre-commit hook that runs jshint on your JavaScript.</p>
            <br>
            <p class="fragment">pre-push hook that runs performance tests on your local. Helps enforce performance budgets.</p>
          </section>
          <section>
            <h2>Travis CI</h2><br>
            <ul class="fragment">
              <li>Simple config via YAML file</li>
              <li>FREE for open-source projects</li>
            </ul>
            <br><br>
            <p class="fragment">Example using Four Kitchens' <a href="https://github.com/fourkitchens/frontend-perf/pull/8">frontend performance training repo</a>.<br><br><span class="fragment">Click the red <span aria-label="x" style="color: #c00; font-weight: bold; ">&times;</span> to see Travis log</span></p>
          </section>
        </section>

        <section>
          <section data-state="blackout">
            <br><br><h1>Automated Testing Services</h1>
          </section>
          <section>
            <br><h2>Ghost Inspector</h2><br>
            <p class="fragment">If you have a team willing to code up these examples, great! I like writing tests to complement code.</p><br>
            <p class="fragment">If not, Ghost Inspector can record a user's actions as they browse normally, and turn those actions into Casper code.</p><br>
            <p class="fragment"><a href="https://ghostinspector.com/">Ghost Inspector</a></p>
          </section>
        </section>

        <section>
          <br>
          <h2>Further reading</h2>
          <br>
          <ul>
            <li><a href="http://www.smashingmagazine.com/2013/06/11/front-end-ops/">Frontend Ops</a> by Alex Sexton</li>
            <li><a href="https://speakerdeck.com/addyosmani/automating-front-end-workflow">Automating Frontend Workflow</a> by Addy Osmani</li>
            <li><a href="http://yeoman.io/blog/performance-optimization.html">Grunt/Gulp tasks for Performance Optimization</a></li>
            <li><a href="https://drupalize.me/blog/201410/using-remote-debugger-casperjs-and-phantomjs">Remote debugging for Casper/Phantom</a> by Joe Shindelar</li>
          </ul>
        </section>

        <section data-state="bluesy">
          <h1>Questions?</h1>
          <br>
          <p>Contact me:</p>
          <p><a href="https://www.drupal.org/u/rupl">drupal.org/u/rupl</a></p>
          <p><a href="https://github.com/rupl">github.com/rupl</a></p>
          <p><a href="https://twitter.com/rupl">twitter.com/rupl</a></p>
          <p>chris &#x2740; fourkitchens.com</p>
        </section>

        <!-- <section data-state="bluesy">
          <h2>Rate this session!</h2>
          <br>
          <p>
            <a href="https://austin2014.drupal.org/session/automated-frontend-testing">Visit the session page</a> to leave feedback.
            <br>
            <small>It means a lot to me ❤ Thanks!</small><br><br>
            Short link: <a href="http://j.mp/ams-testing">j.mp/ams-testing</a><br><br>
            Select <i>"Provide feedback on this session"</i>
          </p>
        </section> -->
      </div>

      <!-- The navigational controls UI -->
      <aside class="controls">
        <a class="left" href="#">&#x25C4;</a>
        <a class="right" href="#">&#x25BA;</a>
        <a class="up" href="#">&#x25B2;</a>
        <a class="down" href="#">&#x25BC;</a>
      </aside>

      <!-- Displays presentation progress, max value changes via JS to reflect # of slides -->
      <div class="progress"><span></span></div>

    </div>

    <!-- Optional libraries for code syntax highlighting and classList support in IE9 -->
    <script src="lib/classList.js"></script>
    <script src="lib/prism.js"></script>

    <script src="js/reveal.js"></script>

    <script>
      // Parse the query string into a key/value object
      var query = {};
      location.search.replace( /[A-Z0-9]+?=(\w*)/gi, function(a) {
        query[ a.split( '=' ).shift() ] = a.split( '=' ).pop();
      } );

      // Fires when a slide with data-state=customevent is activated
      Reveal.addEventListener( 'customevent', function() {
        alert( '"customevent" has fired' );
      } );

      // Fires each time a new slide is activated
      Reveal.addEventListener( 'slidechanged', function( event ) {
        // event.previousSlide, event.currentSlide, event.indexh, event.indexv
      } );

      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,
        // Display a presentation progress bar
        progress: true,
        // If true; each slide will be pushed to the browser history
        history: true,
        // Loops the presentation, defaults to false
        loop: false,
        // Flags if mouse wheel navigation should be enabled
        mouseWheel: true,
        // Apply a 3D roll to links on hover
        rollingLinks: true,
        // UI style
        theme: query.theme || 'default', // default/neon
        // Transition style
        transition: query.transition || 'linear' // default/cube/page/concave/linear(2d)
      });
    </script>
  </body>
</html>
